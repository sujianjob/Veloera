# Veloera 管理后台

Veloera 音视频转录服务的管理后台界面，提供完整的系统管理和监控功能。

## 功能概览

### 🎯 核心功能

1. **系统仪表板** (`/admin`)
   - 系统概览和关键指标
   - 实时任务状态统计
   - 最近任务列表
   - 快速操作入口

2. **任务管理** (`/admin/tasks`)
   - 查看所有用户的转录任务
   - 按状态和用户筛选
   - 任务操作（下载、预览、删除）
   - 批量管理功能

3. **转录引擎管理** (`/admin/engines`)
   - 管理转录引擎配置
   - 添加、编辑、删除引擎
   - 引擎状态监控和测试
   - 负载均衡配置

4. **用户管理** (`/admin/users`)
   - 用户信息管理
   - 权限和角色设置
   - 配额管理
   - 用户状态控制

5. **系统统计** (`/admin/stats`)
   - 详细的使用统计
   - 性能指标分析
   - 热门格式统计
   - 时间段分析

6. **系统设置** (`/admin/settings`)
   - 基础系统配置
   - 转录参数设置
   - 通知配置
   - 维护模式

## 页面详情

### 仪表板 (Dashboard)

**路径**: `/admin`

**功能**:
- 显示总任务数、总用户数、处理时长等关键指标
- 实时任务状态分布图表
- 最近任务列表
- 快速操作按钮

**关键指标**:
- 总任务数 (今日新增)
- 总用户数
- 总处理时长 (今日处理)
- 总文件大小

### 任务管理 (Tasks)

**路径**: `/admin/tasks`

**功能**:
- 查看所有转录任务
- 多维度筛选 (状态、用户名、文件名)
- 任务详细信息展示
- 批量操作支持

**操作**:
- 预览转录结果
- 下载结果文件
- 删除任务
- 查看任务详情

**筛选选项**:
- 任务状态: 全部、等待中、转录中、已完成、失败、已取消
- 用户名筛选
- 文件名搜索

### 转录引擎管理 (Engines)

**路径**: `/admin/engines`

**功能**:
- 管理转录引擎配置
- 引擎状态监控
- 性能测试
- 负载均衡设置

**引擎配置**:
- 引擎名称和类型
- API密钥和基础URL
- 文件大小和时长限制
- 支持的格式和语言
- 权重和分组设置

**状态管理**:
- 启用/禁用引擎
- 自动故障检测
- 手动测试连接

### 用户管理 (Users)

**路径**: `/admin/users`

**功能**:
- 用户信息管理
- 权限控制
- 配额管理
- 状态控制

**用户信息**:
- 基本信息 (用户名、邮箱、显示名)
- 角色权限 (普通用户、管理员、超级管理员)
- 配额使用情况
- 账户状态 (正常、禁用)

**操作**:
- 编辑用户信息
- 修改权限和配额
- 启用/禁用账户
- 删除用户

### 系统统计 (Statistics)

**路径**: `/admin/stats`

**功能**:
- 详细的系统使用统计
- 多维度数据分析
- 趋势图表展示
- 性能指标监控

**统计维度**:
- 时间维度: 今日、本周、本月
- 状态维度: 成功率、失败率
- 格式维度: 热门文件格式
- 用户维度: 活跃用户统计

**关键指标**:
- 任务成功率
- 平均文件大小
- 平均处理时长
- 系统资源使用

### 系统设置 (Settings)

**路径**: `/admin/settings`

**功能**:
- 系统基础配置
- 转录参数设置
- 通知配置
- 维护模式控制

**配置分类**:

1. **基础设置**:
   - 网站名称和描述
   - 管理员邮箱
   - 文件大小和时长限制
   - 默认用户配额
   - 注册和验证设置

2. **转录设置**:
   - 默认语言和质量
   - 默认输出格式
   - 并发任务限制
   - 任务超时设置
   - 功能开关

3. **通知设置**:
   - 邮件通知开关
   - 任务完成/失败通知
   - 系统警报
   - 维护模式

## 权限控制

### 角色定义

1. **超级管理员** (role: 100)
   - 完全访问权限
   - 系统设置修改
   - 用户管理
   - 引擎管理

2. **管理员** (role: 10)
   - 任务管理
   - 用户查看
   - 统计查看
   - 部分设置修改

3. **普通用户** (role: 1)
   - 无管理后台访问权限

### 访问控制

- 管理后台需要管理员权限 (role >= 10)
- 敏感操作需要超级管理员权限
- API调用包含权限验证
- 前端路由保护

## 技术实现

### 前端技术栈

- **框架**: Next.js 15 + React 19
- **样式**: Tailwind CSS + shadcn/ui
- **状态管理**: React Hooks
- **路由**: Next.js App Router
- **图标**: Lucide React

### 组件架构

```
src/app/admin/
├── layout.tsx          # 管理后台布局
├── page.tsx           # 仪表板
├── tasks/page.tsx     # 任务管理
├── engines/page.tsx   # 引擎管理
├── users/page.tsx     # 用户管理
├── stats/page.tsx     # 系统统计
└── settings/page.tsx  # 系统设置
```

### API集成

- 完整的RESTful API集成
- 统一的错误处理
- 实时数据刷新
- 分页和筛选支持

## 使用指南

### 访问管理后台

1. 确保具有管理员权限
2. 访问 `/admin` 路径
3. 使用侧边栏导航

### 常用操作

1. **查看系统状态**:
   - 访问仪表板查看概览
   - 检查关键指标
   - 查看最近任务

2. **管理转录任务**:
   - 进入任务管理页面
   - 使用筛选功能查找任务
   - 执行批量操作

3. **配置转录引擎**:
   - 添加新的转录引擎
   - 测试引擎连接
   - 调整负载均衡

4. **用户管理**:
   - 查看用户列表
   - 修改用户权限
   - 管理配额

5. **系统配置**:
   - 修改基础设置
   - 调整转录参数
   - 配置通知选项

### 维护操作

1. **启用维护模式**:
   - 进入系统设置
   - 开启维护模式
   - 暂停新任务接收

2. **监控系统状态**:
   - 查看统计页面
   - 监控成功率
   - 检查引擎状态

3. **数据备份**:
   - 定期导出重要数据
   - 备份系统配置
   - 保存用户信息

## 安全考虑

- 所有管理操作需要身份验证
- 敏感信息加密存储
- 操作日志记录
- 权限最小化原则
- CSRF保护
- XSS防护

## 故障排除

### 常见问题

1. **无法访问管理后台**:
   - 检查用户权限
   - 确认登录状态
   - 验证API连接

2. **数据加载失败**:
   - 检查网络连接
   - 验证API状态
   - 查看控制台错误

3. **操作失败**:
   - 检查权限设置
   - 验证输入数据
   - 查看错误提示

### 调试方法

- 使用浏览器开发者工具
- 检查网络请求
- 查看控制台日志
- 验证API响应

## 更新日志

### v1.0.0
- 初始版本发布
- 完整的管理后台功能
- 响应式设计
- 多语言支持

---

如有问题或建议，请联系开发团队。
